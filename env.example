# ---- App
NODE_ENV=development
APP_PORT=5001
APP_NAME=tenant-svc
FRONTEND_DOMAIN=http://localhost:4200
BACKEND_DOMAIN=http://localhost:5001
API_PREFIX=api
APP_FALLBACK_LANGUAGE=en
APP_HEADER_LANGUAGE=x-custom-lang
INVITATION_EXPIRY_DAYS=7

# ---- Ory
ORY_HYDRA_PUBLIC_URL=http://localhost:4444
ORY_HYDRA_ISSUER=http://localhost:4444
ORY_KETO_READ_URL=http://localhost:4466
ORY_KETO_WRITE_URL=http://localhost:4467
JWT_AUDIENCE=

# ---- Redis (standalone, no TLS)
REDIS_MODE=standalone
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_DB=0
REDIS_TLS=false
REDIS_USERNAME=
REDIS_PASSWORD=
REDIS_KEY_PREFIX=my-svc
REDIS_ENABLE_AUTOPIPELINING=true
REDIS_LAZY_CONNECT=true
REDIS_AUTH_MODE=none

# ---- Postgres
DATABASE_TYPE=postgres
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USERNAME=root
DATABASE_PASSWORD=root
DATABASE_NAME=tenants
DATABASE_TEST_NAME=tenants_test
DATABASE_SYNCHRONIZE=true
DATABASE_LOGGING=true
DATABASE_MAX_CONNECTIONS=50
DATABASE_SSL_ENABLED=false
DATABASE_REJECT_UNAUTHORIZED=false

# ---- ClickHouse
CH_URL=http://127.0.0.1:8123
CH_USERNAME=sa
CH_PASSWORD=sa
CH_DATABASE=analytics

# ---- AWS (LocalStack)
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=test
AWS_SECRET_ACCESS_KEY=test

# S3 via LocalStack
S3_BUCKET=referral-pulse
S3_REGION=us-east-1
S3_ENDPOINT=http://127.0.0.1:4566
S3_FORCE_PATH_STYLE=true
S3_ACCELERATE=false
S3_KEY_PREFIX=my-svc
S3_SSE=none
S3_PRESIGN_EXPIRES_SEC=900

# SES (Email)
SES_FROM_EMAIL=noreply@referral-pulse.com

# SQS via LocalStack (account id 000000000000)
SQS_REGION=us-east-1
SQS_ENDPOINT=http://127.0.0.1:4566
SQS_CONSUMERS_JSON=[{"name":"orders","queueUrl":"http://127.0.0.1:4566/000000000000/orders.fifo","fifo":true,"waitTimeSeconds":20,"visibilityTimeout":60,"batchSize":10}]
SQS_PRODUCERS_JSON=[{"name":"orders","queueUrl":"http://127.0.0.1:4566/000000000000/orders.fifo","fifo":true}]
SQS_DEFAULT_WAIT=20
SQS_DEFAULT_VISIBILITY=30
SQS_DEFAULT_BATCH=10

SQS_CAMPAIGN_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/campaign-events.fifo
SQS_REWARD_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/reward-events.fifo
SQS_ANALYTICS_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/analytics-events.fifo
SQS_CONTENT_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/content-events.fifo
SQS_WORKFLOW_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/workflow-events.fifo
SQS_SDK_CONFIG_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/sdk-config-events.fifo
SQS_CLIENT_IDENTITY_EVENTS_QUEUE_URL=http://127.0.0.1:4566/000000000000/client-identity-events.fifo
SQS_EVENT_TRACKING_INGESTION_QUEUE_URL=http://127.0.0.1:4566/000000000000/event-tracking-ingestion.fifo

SNS_TENANT_EVENTS_TOPIC_ARN=arn:aws:sns:us-east-1:000000000000:tenant-events.fifo

# ---- HTTP clients (short timeouts locally)
INTRA_HTTP_BASE_URL=http://localhost:3000
INTRA_HTTP_TIMEOUT_MS=3000
INTRA_HTTP_RETRIES=1
INTRA_HTTP_RETRY_BASE_DELAY_MS=200
INTRA_HTTP_RETRY_STATUSES=429,502,503,504
INTRA_TENANT_HEADER=x-tenant-id
INTRA_JWT_HEADER_NAME=authorization

TP_HTTP_TIMEOUT_MS=5000
TP_HTTP_UA=referral-pulse-svc/dev
TP_HTTP_RETRIES=1
TP_HTTP_RETRY_BASE_DELAY_MS=200
TP_HTTP_RETRY_STATUSES=429,500,502,503,504

# ---- Circuit breakers (local)
INTRA_CB_TIMEOUT_MS=2500
INTRA_CB_VOLUME_THRESHOLD=5
INTRA_CB_ERR_PCT=50
INTRA_CB_RESET_TIMEOUT_MS=5000

TP_CB_TIMEOUT_MS=3500
TP_CB_VOLUME_THRESHOLD=5
TP_CB_ERR_PCT=50
TP_CB_RESET_TIMEOUT_MS=8000

# ---- Metrics/Tracing
METRICS_ENABLED=true
METRICS_ENDPOINT=/metrics
OTEL_ENABLED=false
OTEL_EXPORTER_OTLP_TRACES_ENDPOINT=http://otel-collector.otel.svc.cluster.local:4318/v1/traces
TOKEN_BROKER_BASE_URL=http://localhost:3000
TOKEN_BROKER_TIMEOUT_MS=5000

# ---- Services
SERVICE_CAMPAIGNS_URL=http://localhost:5002
SERVICE_REWARDS_URL=http://localhost:5003
SERVICE_ANALYTICS_URL=http://localhost:5004
SERVICE_SDK_CONFIG_URL=http://localhost:5005
SERVICE_CONTENT_AI_URL=http://localhost:5006
SERVICE_CLIENT_IDENTITY_URL=http://localhost:5007
SERVICE_WORKFLOW_ORCHESTRATION_URL=http://localhost:5008